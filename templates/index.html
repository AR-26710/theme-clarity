<!doctype html>
<html xmlns:th="https://www.thymeleaf.org" th:replace="~{modules/layout :: html(content = ~{::content})}">
  <th:block th:fragment="content">
    
    <!-- Post List -->
    <div class="post-list">
      <div class="toolbar">
        <div class="text-sm opacity-70">文章列表</div>
      </div>

      <!-- Posts Container -->
      <menu class="posts-container proper-height">
        <th:block th:each="post,iterStat : ${posts.items}">
          <article class="article-card card" th:style="'--delay: ' + ${iterStat.index * 0.05} + 's'">
            <a th:href="${post.status.permalink}">
              <img th:if="${post.spec.cover}" 
                   th:src="${post.spec.cover}" 
                   class="article-cover" 
                   loading="lazy"
                   th:alt="${post.spec.title}" />
            </a>
            
            <div class="article-body">
              <h2 class="article-title text-creative">
                <a th:href="${post.status.permalink}" th:text="${post.spec.title}"></a>
              </h2>

              <p th:if="${post.status.excerpt}" 
                 class="article-description" 
                 th:text="${post.status.excerpt}">
              </p>

              <div class="article-info">
                <span class="info-item">
                  <span class="icon-[ph--calendar-dots-bold]"></span>
                  <time th:text="${#temporals.format(post.spec.publishTime, 'yyyy-MM-dd')}"></time>
                </span>

                <span th:if="${not #lists.isEmpty(post.categories)}" class="info-item article-category">
                  <span class="icon-[ph--folder-bold]"></span>
                  <a th:href="${post.categories[0].status.permalink}" 
                     th:text="${post.categories[0].spec.displayName}"></a>
                </span>
                
                <span class="info-item">
                  <span class="icon-[ph--eye-bold]"></span>
                  <span th:text="${post.stats.visit}">0</span>
                </span>
              </div>
            </div>
          </article>
        </th:block>
      </menu>

      <!-- Pagination -->
      <div class="pagination" th:if="${posts.totalPages > 1}">
        <a th:if="${posts.hasPrevious}" th:href="${posts.prevUrl}" class="btn card">
          <span class="icon-[ph--caret-left-bold]"></span>
          <span>上一页</span>
        </a>
        <span class="page-info" th:text="${posts.page} + ' / ' + ${posts.totalPages}"></span>
        <a th:if="${posts.hasNext}" th:href="${posts.nextUrl}" class="btn card">
          <span>下一页</span>
          <span class="icon-[ph--caret-right-bold]"></span>
        </a>
      </div>
    </div>

  </th:block>
</html>
