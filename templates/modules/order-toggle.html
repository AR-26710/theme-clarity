<div class="toolbar" th:fragment="toolbar">
  <div></div>

  <div class="order-toggle">
    <div class="dropdown dropdown-end">
      <div tabindex="0" role="button" class="dropdown-trigger">
        <th:block th:with="catIcon = ${category?.metadata?.annotations != null ? category.metadata.annotations['categoryIicon'] : null}">
          <i th:if="${not #strings.isEmpty(catIcon)}" th:class="'iconfont ' + ${catIcon}"></i>
          <span th:if="${#strings.isEmpty(catIcon)}" class="icon-[ph--folder-bold]"></span>
        </th:block>
        <span th:text="${category != null} ? ${category.spec.displayName} : '全部分类'">全部分类</span>
        <span class="icon-[ph--caret-down-bold]" style="font-size: 0.75em;"></span>
      </div>
      <ul tabindex="0" class="dropdown-content menu bg-base-100 rounded-box z-[9999] w-40 p-2 shadow-lg">
        <li>
          <a href="/" th:classappend="${category == null} ? 'active' : ''">
            <span class="icon-[ph--squares-four-bold]"></span>
            全部分类
          </a>
        </li>
        <th:block th:each="cat : ${categoryFinder.listAll()}">
          <li>
            <a th:href="${cat.status.permalink}" th:classappend="${category != null and category.metadata.name == cat.metadata.name} ? 'active' : ''">
              <th:block th:with="icon = ${cat.metadata.annotations != null ? cat.metadata.annotations['categoryIicon'] : null}">
                <i th:if="${not #strings.isEmpty(icon)}" th:class="'iconfont ' + ${icon}"></i>
                <span th:if="${#strings.isEmpty(icon)}" class="icon-[ph--folder]"></span>
              </th:block>
              <span th:text="${cat.spec.displayName}"></span>
            </a>
          </li>
        </th:block>
      </ul>
    </div>
  </div>
</div>
